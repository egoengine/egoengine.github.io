<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>EgoEngine</title>
<style>
  :root{
    --divider-x: 50vw;
    --bg:#0b0b0c;
    --line:rgba(255,255,255,.95);
    --cell: calc(100vw / 6);            /* full-width cells */
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:#eaeaea;font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}

  /* ===== HERO (teaser) stays one screen tall; video inside is full-width 2:1 ===== */
  .hero{
    position:relative; width:100vw; height:100vh; overflow:hidden;
  }
  /* Stage is the exact video area at 2:1 (6×3) — centered to leave equal top/bottom gap */
  .stage{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    width:100vw; height:calc(100vw / 2);          /* 2:1 aspect (6×3 squares) */
    /* If your screen is ultra-wide and this would exceed height, you can clamp:
       height:min(calc(100vw / 2), 100vh);  (optional) */
  }

  /* Wordmark over teaser only (unchanged styling) */
  .brand{
    position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
    z-index:100; pointer-events:none;
  }
  .brand .wordmark{
    font-weight:900; font-size:clamp(42px,10vw,120px); line-height:1;
    background:linear-gradient(180deg,#fff,#dfe5ff);
    -webkit-background-clip:text; background-clip:text; color:transparent;
    text-shadow:0 10px 32px rgba(0,0,0,.45);
  }

  /* 6×3 grid of squares sized from full width */
  .grid{
    position:absolute; inset:0;
    display:grid;
    grid-template-columns:repeat(6, var(--cell));
    grid-auto-rows:var(--cell);          /* 3 rows → total height = 3*cell = 50vw */
    gap:0;
  }

  .tile{ position:relative; overflow:hidden; background:#000; }
  .tile video{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:block; background:#000; }
  .tile video.base{ z-index:1; }         /* inpainted (right side)  */
  .tile video.overlay{ z-index:2;         /* cropped (left side)    */
    clip-path: polygon(0 0, var(--cut,0px) 0, var(--cut,0px) 100%, 0 100%);
    will-change:clip-path;
  }

  /* Divider only spans the teaser video area (the stage) */
  #divider{
    position:absolute; top:0; bottom:0; left: calc(var(--divider-x) - 1px);
    width:2px; background:var(--line); pointer-events:none; z-index:2;
  }

  /* ===== Hide both vertical & horizontal scrollbars (keep scrolling behavior) ===== */
  html, body{
    -ms-overflow-style: none;   /* IE/old Edge */
    scrollbar-width: none;      /* Firefox */
  }
  html::-webkit-scrollbar,
  body::-webkit-scrollbar{
    width:0;
    height:0;                   /* Chrome/Safari/Edge */
    background:transparent;
  }

    .fancy-title {
    margin: 5vh auto;
    max-width: 80%;
    text-align: center;
    font-size: clamp(28px, 4vw, 56px);
    font-weight: 900;
    line-height: 1.2;
    background: linear-gradient(90deg, #2c2c54, #443377, #5a2a5a);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 4px 12px rgba(0,0,0,0.2);
    animation: title-glow 6s ease-in-out infinite alternate;
  }

  @keyframes title-glow {
    from {
      text-shadow: 0 0 14px rgba(68,51,119,0.6),
                   0 0 28px rgba(90,42,90,0.5),
                   0 0 42px rgba(68,51,119,0.4);
    }
    to {
      text-shadow: 0 0 22px rgba(90,42,90,0.8),
                   0 0 44px rgba(68,51,119,0.7),
                   0 0 60px rgba(90,42,90,0.6);
    }
  }



  .after-hero {
    background: #fff;
    color: #111;
    padding: 5vh 0;
  }

</style>
</head>
<body>

  <!-- TEASER / HERO -->
  <section class="hero" id="hero">
    <div class="stage" id="stage">
      <div class="brand"><div class="wordmark">EgoEngine</div></div>
      <div id="divider"></div>
      <main id="grid" class="grid"></main>
    </div>
  </section>

<div class="after-hero">
  <div class="fancy-title">
    EgoEngine: From Egocentric Human Videos to High-Fidelity Dexterous Robot Demonstrations
  </div>

  <!-- BELOW: your other content -->
  <section id="below">
    <div style="height:150vh"></div>
  </section>

<script>
  const ROOT = 'videos/blending/human';
  const FOLDERS = [
    'Cassie-bartending','Cassie-bartending2','Cassie-blinds','Cassie-boardgame','Cassie-cat2','Cassie-cat_food',
    'Cassie-cooking2','Cassie-door','Cassie-earbuds','Cassie-eyedrops','Cassie-flower','Cassie-fridge',
    'Cassie-laptop','Cassie-microwave','Cassie-oven','Cassie-subway','Cassie-yogurt','Cassie-Rowan-Allen',
  ];

  function makeVideo(src, cls){
    const v = document.createElement('video');
    v.className = cls || '';
    v.autoplay = true; v.loop = true; v.muted = true; v.playsInline = true;
    v.setAttribute('muted',''); v.setAttribute('playsinline','');
    v.preload = 'auto';
    v.src = src;
    const tryPlay = () => v.play().catch(()=>{});
    v.addEventListener('canplay', tryPlay);
    v.addEventListener('loadeddata', tryPlay);
    v.addEventListener('mouseenter', tryPlay);
    v.addEventListener('touchstart', tryPlay, {passive:true});
    v.addEventListener('ended', () => { v.currentTime = 0; tryPlay(); });
    return v;
  }

  const stage = document.getElementById('stage');
  const grid  = document.getElementById('grid');

  // Build tiles (6×3 = 18)
  (function build(){
    for (const name of FOLDERS){
      const tile = document.createElement('div'); tile.className = 'tile';
      const base = makeVideo(`${ROOT}/${name}/inpainted_video.mp4`, 'base');
      const over = makeVideo(`${ROOT}/${name}/cropped_video.mp4`,   'overlay');
      tile.append(base, over);
      grid.appendChild(tile);
    }
    requestAnimationFrame(()=>{ updateDivider(); updateClips(); updatePlayback(); });
  })();

  // Divider control (scoped to stage)
  let cutX = Math.round(window.innerWidth * 0.5);

  function updateDivider(){
    stage.style.setProperty('--divider-x', cutX + 'px');
  }

  function updateClips(){
    document.querySelectorAll('.tile').forEach(tile=>{
      const r = tile.getBoundingClientRect();
      const local = Math.max(0, Math.min(r.width, cutX - r.left)); // px of overlay visible in this tile
      tile.style.setProperty('--cut', local + 'px');
    });
  }

  // Keep decoders down by pausing off-screen halves
  function setPlaying(v, shouldPlay){
    if (!v) return;
    if (shouldPlay) { if (v.paused) v.play().catch(()=>{}); }
    else { if (!v.paused) v.pause(); }
  }
  function updatePlayback(){
    document.querySelectorAll('.tile').forEach(tile=>{
      const base = tile.querySelector('video.base');
      const over = tile.querySelector('video.overlay');
      const r = tile.getBoundingClientRect();
      const cutLocal = Math.max(0, Math.min(r.width, cutX - r.left));
      const showOver = cutLocal > 0;
      const showBase = cutLocal < r.width;
      setPlaying(over, showOver);
      setPlaying(base, showBase);
    });
  }

  function setCutFrom(x){
    const bounds = stage.getBoundingClientRect();
    const clamped = Math.max(bounds.left, Math.min(bounds.right, x));
    cutX = clamped;
    updateDivider(); updateClips(); updatePlayback();
  }

  // Only track pointer over the teaser video area
  stage.addEventListener('mousemove', e => setCutFrom(e.clientX));
  stage.addEventListener('touchstart', e => e.touches[0] && setCutFrom(e.touches[0].clientX), {passive:true});
  stage.addEventListener('touchmove',  e => e.touches[0] && setCutFrom(e.touches[0].clientX), {passive:true});

  window.addEventListener('resize', () => { updateDivider(); updateClips(); updatePlayback(); });
  document.addEventListener('visibilitychange', ()=>{
    if (!document.hidden) document.querySelectorAll('video').forEach(v=> v.play().catch(()=>{}));
  });
</script>
</body>
</html>
